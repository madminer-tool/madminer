{"stages": [{"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["init"]}, "name": "sampling", "scheduler": {"step": {"process": {"interpreter": "sh", "process_type": "interpolated-script-cmd", "script": "mkdir /home/data\nmkdir /home/data/samples\npython code/configurate_ml.py {n_trainsamples} {combined_file} {input_file}\nfor i in `seq 0 $(({n_trainsamples}-1))`; do  tar -czvf /home/data/Samples_$i.tar.gz /home/data/Samples_$i/*; done \ncp -R /home/data/Samples*.tar.gz {sampleworkdir}\n"}, "publisher": {"publisher_type": "fromglob-pub", "outputkey": "sampling_file", "globexpression": "Samples_*.tar.gz"}, "environment": {"workdir": null, "imagetag": "latest", "par_mounts": [], "image": "irinahub/docker-madminer-ml", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "singlestep-stage", "parameters": [{"key": "n_trainsamples", "value": {"output": "ntrainsamples", "step": "init", "expression_type": "stage-output-selector"}}, {"key": "outputfile", "value": "{workdir}/outputfile.txt"}, {"key": "combined_file", "value": {"output": "combinedfile", "step": "init", "expression_type": "stage-output-selector"}}, {"key": "input_file", "value": {"output": "inputfile", "step": "init", "expression_type": "stage-output-selector"}}, {"key": "sampleworkdir", "value": "{workdir}"}]}}, {"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["sampling"]}, "name": "training", "scheduler": {"step": {"process": {"interpreter": "sh", "process_type": "interpolated-script-cmd", "script": "mkdir /home/extract\nmkdir /home/models\ntar -xvzf {trainfolder} -C /home/extract\nmv /home/extract/home/data/Samples_*  /home/extract/home/data/Samples\nls -R /home > {outputfile}\npython code/train.py /home/extract/home/data/Samples {input_file}\ncp -R /home/models/*  {trainworkdir}\n"}, "publisher": {"publisher_type": "interpolated-pub", "glob": false, "relative_paths": false, "publish": {"training_file": "{outputfile}"}}, "environment": {"workdir": null, "imagetag": "latest", "par_mounts": [], "image": "irinahub/docker-madminer-ml", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "multistep-stage", "scatter": {"method": "zip", "parameters": ["trainfolder"]}, "parameters": [{"key": "outputfile", "value": "{workdir}/output.txt"}, {"key": "trainfolder", "value": {"output": "sampling_file", "step": "sampling", "expression_type": "stage-output-selector", "unwrap": true}}, {"key": "trainworkdir", "value": "{workdir}"}, {"key": "input_file", "value": {"output": "inputfile", "step": "init", "expression_type": "stage-output-selector"}}]}}]}